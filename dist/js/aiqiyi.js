"use strict";var _createClass=function(){function n(s,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,n.key,n)}}return function(s,i,t){return i&&n(s.prototype,i),t&&n(s,t),s}}();function _classCallCheck(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")}var specialEffects=function(){function s(){_classCallCheck(this,s),this.sBanner=$(".search_right"),this.li=$(".search_right li"),this.three=$(".three"),this.four=$(".four"),this.num=0,this.timer=null,this.big=$(".big"),this.sml=$(".sml"),this.close=$(".close"),this.n=this.close.html(),this.banner=$(".banner"),this.btns=$(".banner_dot li"),this.pics=$(".banner_pic li"),this.prev=$(".banner .prev"),this.next=$(".banner .next"),this.num1=0,this.timer1=null,this.login=$("#login"),this.register=$("#register"),this.span1=$(".login-h .close1"),this.span2=$(".register-h .close1"),this.register_b=$("#register-b"),this.id=$(".login-h .phone-n"),this.pass=$(".login-h .pass"),this.id1=$(".register-h .phone-n"),this.pass1=$(".register-h .pass"),this.login_b=$(".login-h button"),this.reg_b=$(".register-h button"),this.reg_span=$(".register-h .hint"),this.tel=/^1[34578]\d{9}$/}return _createClass(s,[{key:"init",value:function(){var i=this;this.sBanner.hover(function(){clearInterval(i.timer)},function(){i.timer=setInterval(function(){i.s_right()},500)}),this.three.on("click",function(){i.s_left()}),this.four.on("click",function(){i.s_right()}),this.timer=setInterval(function(){i.s_right()},500),this.close.on("click",function(){"收起<i>&lt;</i>"==i.n?(i.big.animate({height:0}),i.sml.animate({height:60},200),i.n="展开<i>&lt;</i>",i.close.html(i.n)):"展开<i>&lt;</i>"==i.n&&(i.big.animate({height:400}),i.sml.animate({height:0},200),i.n="收起<i>&lt;</i>",i.close.html(i.n))}),this.btns.on("click",function(){i.num1=$(this).index(),i.pics.eq(i.num1).css("display","block").siblings().css("display","none")}),this.btns.hover(function(){$(this).addClass("red").siblings().removeClass("red")}),this.banner.hover(function(){$(".prev,.next").show(),clearInterval(i.timer1)},function(){$(".prev,.next").hide(),i.timer1=setInterval(function(){i.b_next()},500)}),this.next.on("click",function(){i.b_next()}),this.prev.on("click",function(){i.b_prev()}),this.timer1=setInterval(function(){i.b_next()},500),$.ajax({url:"http://10.31.157.38/js1907/JS/Day%2033/src/php/aiqiyi.php",dataType:"json"}).done(function(s){var t="<ul>";console.log(s),$.each(s,function(s,i){t+='\n                        <li>\n                            <a href="details.html?sid='+i.sid+'" target="_blank">\n                                <img src="'+i.url+'" />\n                                <span>'+i.tittle+"</span>\n                                <p>¥"+i.prices+"</p>\n                            </a>\n                        </li>\n                    "}),t+="</ul>",$(".goodslist").html(t)}),this.login.on("click",function(){$(".mengban").css("display","block"),$(".login-h").css("display","block")}),this.span1.on("click",function(){$(".mengban").css("display","none"),$(".login-h").css("display","none")}),this.register.on("click",function(){$(".mengban").css("display","block"),$(".register-h").css("display","block")}),this.span2.on("click",function(){$(".mengban").css("display","none"),$(".register-h").css("display","none")}),this.register_b.on("click",function(s){s.preventDefault(),$(".login-h").hide(),$(".register-h").show()}),this.id.on("focus",function(){$(this).attr("placeholder","")}),this.id1.on("focus",function(){$(this).attr("placeholder","")}),this.login_b.on("click",function(){$.ajax({type:"post",url:"http://10.31.157.38/js1907/JS/Day%2033/src/php/login.php",data:{user:i.id.val(),pass:i.pass.val()},success:function(s){s?(alert("登录成功"),location.href="http://10.31.157.38/js1907/JS/Day%2033/src/aiqiyi.html"):alert("用户名和密码错误")}})}),this.id1.on("focus",function(){""===$(this).val()&&(i.reg_span.html("请输入手机号"),i.reg_span.css("color","#ccc"))}),this.id1.on("blur",function(){$.ajax({type:"post",url:"http://10.31.157.38/js1907/JS/Day%2033/src/php/register.php",data:{checkname:$(this).val()},success:function(s){console.log(s),""!==i.id1.val()?s?(alert("该用户名已存在,请重新输入"),i.id1.val(""),i.id1.focus()):(i.reg_span.html("√"),i.reg_span.css("color","green"),i.tel.test(i.id1.val())?(i.reg_span.html("√"),i.reg_span.css("color","green")):(i.reg_span.html("手机号码有误"),i.reg_span.css("color","red"))):(i.reg_span.html("手机号不能为空"),i.reg_span.css("color","red"))}})}),this.reg_b.on("click",function(){i.tel.test(i.id1.val())&&""!=i.id1.val()?""==i.pass1.val()?(alert("密码不能为空，请重新输入"),i.pass1.focus()):$.ajax({type:"post",url:"http://10.31.157.38/js1907/JS/Day%2033/src/php/register.php",data:{username:i.id1.val(),password:i.pass1.val()},success:function(){alert("注册成功"),location.href="http://10.31.157.38/js1907/JS/Day%2033/src/aiqiyi.html"}}):(alert("手机号输入有误，请重新输入"),i.id1.val(""),i.id1.focus())})}},{key:"s_left",value:function(){this.num--,this.num<0&&(this.num=this.li.length-1),this.li.eq(this.num).css("display","block").siblings().css("display","none")}},{key:"s_right",value:function(){this.num++,this.num>this.li.length-1&&(this.num=0),this.li.eq(this.num).css("display","block").siblings().css("display","none")}},{key:"b_next",value:function(){this.num1++,this.num1>this.btns.length-1&&(this.num1=0),this.pics.eq(this.num1).css("display","block").siblings().css("display","none"),this.btns.eq(this.num1).addClass("red").siblings().removeClass("red")}},{key:"b_prev",value:function(){this.num1--,this.num1<0&&(this.num1=this.btns.length-1),this.pics.eq(this.num1).css("display","block").siblings().css("display","none"),this.btns.eq(this.num1).addClass("red").siblings().removeClass("red")}}]),s}();(new specialEffects).init();var $loutinav=$("#loutinav"),$loutinavli=$("#loutinav li"),$louceng=$(".louti");$(window).on("scroll",function(){var n=$(this).scrollTop();800<=n?$loutinav.show():$loutinav.hide(),$louceng.each(function(s,i){var t=$(i).offset().top+$(i).height()/2;if(n<t)return $loutinavli.eq(s).addClass("active").siblings().removeClass("active"),!1})}),$loutinavli.not(".last").on("click",function(){$(this).addClass("active").siblings().removeClass("active");var s=$louceng.eq($(this).index()).offset().top;$("html,body").animate({scrollTop:s})}),$(".last").on("click",function(){$("html,body").animate({scrollTop:0})});